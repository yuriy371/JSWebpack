(()=>{"use strict";const e=({timing:e,draw:t,duration:l})=>{let r=performance.now();requestAnimationFrame((function a(o){let n=(o-r)/l;n>1&&(n=1);let c=e(n);t(c),n<1&&requestAnimationFrame(a)}))};(e=>{let t=document.getElementById("timer-hours"),l=document.getElementById("timer-minutes"),r=document.getElementById("timer-seconds"),a=e=>e<10?"0"+e:e,o=setInterval((()=>{let e=(()=>{let e=(new Date("31 december 2021").getTime()-(new Date).getTime())/1e3;return{timeRemaining:e,hours:Math.floor(e/60/60),minutes:Math.floor(e/60%60),seconds:Math.floor(e%60)}})();t.textContent=a(e.hours),l.textContent=a(e.minutes),r.textContent=a(e.seconds),e.timeRemaining<0&&(t.textContent=a(0),l.textContent=a(0),r.textContent=a(0),clearInterval(o))}),1e3)})(),(()=>{let e=document.querySelector(".menu"),t=document.querySelector("menu"),l=document.querySelector("a[href='#service-block']"),r=()=>{t.classList.toggle("active-menu")},a=e=>{let t=e.getAttribute("href").slice(1);document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start"})};e.addEventListener("click",(e=>{e.target.closest(".menu")&&r()})),l.addEventListener("click",(e=>{e.preventDefault(),a(l)})),t.addEventListener("click",(e=>{let t=e.target;if(e.target.matches("ul>li>a"))e.preventDefault(),r(),a(t);else{if(!e.target.closest(".close-btn"))return;r()}}))})(),(()=>{let t=document.querySelectorAll(".popup-btn"),l=document.querySelector(".popup"),r=document.documentElement.clientWidth;t.forEach((t=>{t.addEventListener("click",(()=>{l.style.display="block",r<768?(clearInterval(e),l.style.opacity=""):e({duration:600,timing:e=>e,draw(e){l.style.opacity=e}})}))})),l.addEventListener("click",(t=>{t.target.closest(".popup-content")&&!t.target.classList.contains("popup-close")||(r<768?l.style.display="none":1==l.style.opacity&&e({duration:500,timing:e=>e,draw(e){l.style.opacity=1-e,0==l.style.opacity&&(l.style.display="none")}}))}))})(),(()=>{let e=document.querySelectorAll(".calc-square"),t=document.querySelectorAll(".calc-count"),l=document.querySelectorAll(".calc-day"),r=(document.querySelectorAll("#form1"),document.querySelectorAll("#form2"),document.querySelectorAll("#form3"),[...e,...t,...l]),a=/[^\d]/g;r.forEach((e=>{e.addEventListener("input",(()=>{a.test(e.value)&&(e.value=e.value.replace(a,""))}))}))})(),(()=>{let e=document.querySelectorAll(".service-tab"),t=document.querySelector(".service-header"),l=document.querySelectorAll(".service-header-tab");t.addEventListener("click",(t=>{if(t.target.closest(".service-header-tab")){let r=t.target.closest(".service-header-tab");l.forEach(((t,l)=>{t===r?(t.classList.add("active"),e[l].classList.remove("d-none")):(t.classList.remove("active"),e[l].classList.add("d-none"))}))}}))})(),((e,t,l,r="portfolio-item-active",a="dot-active")=>{let o,n=document.querySelector(e),c=document.querySelectorAll(t),s=document.querySelector(l),u=[],d=0,i=(e,t,l)=>{e[t].classList.remove(l)},m=(e,t,l)=>{e[t].classList.add(l)},v=()=>{i(c,d,r),i(u,d,a),d++,d>=c.length&&(d=0),m(c,d,r),m(u,d,a)},p=(e=1500)=>{o=setInterval(v,e)};"."===e[0]&&""!==e&&"."===t[0]&&""!==t&&(n.addEventListener("click",(e=>{e.preventDefault(),e.target.matches(".dot, .portfolio-btn")&&(i(c,d,r),i(u,d,a),e.target.matches("#arrow-right")?d++:e.target.matches("#arrow-left")?d--:e.target.classList.contains("dot")&&u.forEach(((t,l)=>{e.target===t&&(d=l)})),d>=c.length&&(d=0),d<0&&(d=c.length-1),m(c,d,r),m(u,d,a))})),n.addEventListener("mouseenter",(e=>{e.target.matches(".dot, .portfolio-btn")&&clearInterval(o)}),!0),n.addEventListener("mouseleave",(e=>{e.target.matches(".dot, .portfolio-btn")&&p(2e3)}),!0),c.forEach(((e,t)=>{let l=document.createElement("li");l.className=0===t?`dot ${a}`:"dot",s.append(l),u.push(l)})),p(2e3))})(".portfolio-content",".portfolio-item",".portfolio-dots"),((e=100)=>{let t=document.querySelector(".calc-block"),l=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),a=document.querySelector(".calc-count"),o=document.querySelector(".calc-day"),n=document.getElementById("total"),c=(e,c=10,s=1)=>{let u=setInterval((()=>{1*n.innerHTML+c>=e?(n.innerHTML=e,clearInterval(u)):n.innerHTML=1*n.innerHTML+c,t.addEventListener("input",(e=>{e.target!==l&&e.target!==r&&e.target!==a&&e.target!==o||clearInterval(u)}))}),s)};t.addEventListener("input",(t=>{t.target!==l&&t.target!==r&&t.target!==a&&t.target!==o||(()=>{let t=+l.options[l.selectedIndex].value,n=r.value,s=0,u=1,d=1;a.value>1&&(u+=+a.value/10),o.value&&o.value<5?d=2:o.value&&o.value<10&&(d=1.5),l.value&&r.value?(s=e*t*n*u*d,c(s,50,1)):(s=0,c(s))})()}))})(100),(({formId:e,formIdModal:t,formIdMess:l,someElem:r=[]})=>{let a=document.getElementById(e),o=document.getElementById(t),n=document.getElementById(l),c=document.createElement("div"),s=e=>{let t=/[^А-Я\s-]/gi,l=/[^\d()\-+]/g,r=e.querySelector("[name='user_name']"),a=e.querySelector("[name='user_phone']"),o=e.querySelector("[name='user_email']"),n=e.querySelector("[name='user_message']");/^([A-Z\d_\-\.!~*'])+\@([A-Z\d])+\.([A-Z]{2,3})$/gi.test(o.value)&&""!==o.value?(c.remove(),o.classList.add("success")):(o.classList.remove("success"),c.textContent="Почта введена не правильно",c.style.color="#ffffff",e.append(c)),t.test(r.value)||""===r.value?(r.classList.remove("success"),r.value=r.value.replace(t,"")):(r.classList.add("success"),r.value=r.value.replace(t,"")),n&&(t.test(n.value)||""===n.value?(n.classList.remove("success"),n.value=n.value.replace(t,"")):(n.classList.add("success"),n.value=n.value.replace(t,""))),l.test(a.value)||""===a.value?(a.classList.remove("success"),a.value=a.value.replace(l,"")):(a.classList.add("success"),a.value=a.value.replace(l,""))},u=e=>{let t=e.querySelectorAll("input"),l=new FormData(e),a={};var o;c.textContent="Загрузка...",c.style.color="#ffffff",e.append(c),l.forEach(((e,t)=>{a[t]=e})),r.forEach((e=>{let t=document.getElementById(e.id);"block"===e.type?a[e.id]=t.textContent:"input"===e.type&&(a[e.id]=t.value)})),(e=>{let t=!0;return e.forEach((e=>{e.classList.contains("success")||(t=!1,console.log(e))})),t})(t)?(o=a,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(o),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((e=>e.json()))).then((e=>{c.textContent="Спасибо! Наш менеджер с вами свяжется.",t.forEach((e=>{e.value=""}))})).catch((e=>{c.textContent="Ошибка"})):console.log("error")};try{if(!a||!o||!n)throw new Error("Верните форму на место!");a.addEventListener("submit",(e=>{e.preventDefault(),u(a)})),o.addEventListener("submit",(e=>{e.preventDefault(),u(o)})),n.addEventListener("submit",(e=>{e.preventDefault(),u(n)})),a.addEventListener("input",(()=>{s(a)})),o.addEventListener("input",(()=>{s(o)})),n.addEventListener("input",(()=>{s(n)}))}catch(e){console.log(e.message)}})({formId:"form1",formIdModal:"form3",formIdMess:"form2",someElem:[{type:"block",id:"total"}]})})();