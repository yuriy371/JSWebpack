(()=>{"use strict";const e=({timing:e,draw:t,duration:l})=>{let a=performance.now();requestAnimationFrame((function r(n){let o=(n-a)/l;o>1&&(o=1);let c=e(o);t(c),o<1&&requestAnimationFrame(r)}))};(e=>{let t=document.getElementById("timer-hours"),l=document.getElementById("timer-minutes"),a=document.getElementById("timer-seconds"),r=e=>e<10?"0"+e:e,n=setInterval((()=>{let e=(()=>{let e=(new Date("31 december 2021").getTime()-(new Date).getTime())/1e3;return{timeRemaining:e,hours:Math.floor(e/60/60),minutes:Math.floor(e/60%60),seconds:Math.floor(e%60)}})();t.textContent=r(e.hours),l.textContent=r(e.minutes),a.textContent=r(e.seconds),e.timeRemaining<0&&(t.textContent=r(0),l.textContent=r(0),a.textContent=r(0),clearInterval(n))}),1e3)})(),(()=>{let e=document.querySelector(".menu"),t=document.querySelector("menu"),l=document.querySelector("a[href='#service-block']"),a=()=>{t.classList.toggle("active-menu")},r=e=>{let t=e.getAttribute("href").slice(1);document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start"})};e.addEventListener("click",(e=>{e.target.closest(".menu")&&a()})),l.addEventListener("click",(e=>{e.preventDefault(),r(l)})),t.addEventListener("click",(e=>{let t=e.target;if(e.target.matches("ul>li>a"))e.preventDefault(),a(),r(t);else{if(!e.target.closest(".close-btn"))return;a()}}))})(),(()=>{let t=document.querySelectorAll(".popup-btn"),l=document.querySelector(".popup"),a=document.documentElement.clientWidth;t.forEach((t=>{t.addEventListener("click",(()=>{l.style.display="block",a<768?(clearInterval(e),l.style.opacity=""):e({duration:600,timing:e=>e,draw(e){l.style.opacity=e}})}))})),l.addEventListener("click",(t=>{t.target.closest(".popup-content")&&!t.target.classList.contains("popup-close")||(a<768?l.style.display="none":1==l.style.opacity&&e({duration:500,timing:e=>e,draw(e){l.style.opacity=1-e,0==l.style.opacity&&(l.style.display="none")}}))}))})(),(()=>{let e=document.querySelectorAll(".calc-square"),t=document.querySelectorAll(".calc-count"),l=document.querySelectorAll(".calc-day"),a=(document.querySelectorAll("#form1"),document.querySelectorAll("#form2"),document.querySelectorAll("#form3"),[...e,...t,...l]),r=/[^\d]/g;a.forEach((e=>{e.addEventListener("input",(()=>{r.test(e.value)&&(e.value=e.value.replace(r,""))}))}))})(),(()=>{let e=document.querySelectorAll(".service-tab"),t=document.querySelector(".service-header"),l=document.querySelectorAll(".service-header-tab");t.addEventListener("click",(t=>{if(t.target.closest(".service-header-tab")){let a=t.target.closest(".service-header-tab");l.forEach(((t,l)=>{t===a?(t.classList.add("active"),e[l].classList.remove("d-none")):(t.classList.remove("active"),e[l].classList.add("d-none"))}))}}))})(),((e,t,l,a="portfolio-item-active",r="dot-active")=>{let n,o=document.querySelector(e),c=document.querySelectorAll(t),s=document.querySelector(l),u=[],d=0,i=(e,t,l)=>{e[t].classList.remove(l)},m=(e,t,l)=>{e[t].classList.add(l)},v=()=>{i(c,d,a),i(u,d,r),d++,d>=c.length&&(d=0),m(c,d,a),m(u,d,r)},p=(e=1500)=>{n=setInterval(v,e)};"."===e[0]&&""!==e&&"."===t[0]&&""!==t&&(o.addEventListener("click",(e=>{e.preventDefault(),e.target.matches(".dot, .portfolio-btn")&&(i(c,d,a),i(u,d,r),e.target.matches("#arrow-right")?d++:e.target.matches("#arrow-left")?d--:e.target.classList.contains("dot")&&u.forEach(((t,l)=>{e.target===t&&(d=l)})),d>=c.length&&(d=0),d<0&&(d=c.length-1),m(c,d,a),m(u,d,r))})),o.addEventListener("mouseenter",(e=>{e.target.matches(".dot, .portfolio-btn")&&clearInterval(n)}),!0),o.addEventListener("mouseleave",(e=>{e.target.matches(".dot, .portfolio-btn")&&p(2e3)}),!0),c.forEach(((e,t)=>{let l=document.createElement("li");l.className=0===t?`dot ${r}`:"dot",s.append(l),u.push(l)})),p(2e3))})(".portfolio-content",".portfolio-item",".portfolio-dots"),((e=100)=>{let t=document.querySelector(".calc-block"),l=document.querySelector(".calc-type"),a=document.querySelector(".calc-square"),r=document.querySelector(".calc-count"),n=document.querySelector(".calc-day"),o=document.getElementById("total"),c=(e,c=10,s=1)=>{let u=setInterval((()=>{1*o.innerHTML+c>=e?(o.innerHTML=e,clearInterval(u)):o.innerHTML=1*o.innerHTML+c,t.addEventListener("input",(e=>{e.target!==l&&e.target!==a&&e.target!==r&&e.target!==n||clearInterval(u)}))}),s)};t.addEventListener("input",(t=>{t.target!==l&&t.target!==a&&t.target!==r&&t.target!==n||(()=>{let t=+l.options[l.selectedIndex].value,o=a.value,s=0,u=1,d=1;r.value>1&&(u+=+r.value/10),n.value&&n.value<5?d=2:n.value&&n.value<10&&(d=1.5),l.value&&a.value?(s=e*t*o*u*d,c(s,50,1)):(s=0,c(s))})()}))})(100),(({formId:t,formIdModal:l,formIdMess:a,someElem:r=[]})=>{let n=document.getElementById(t),o=document.getElementById(l),c=document.getElementById(a),s=document.createElement("div"),u=e=>{e.value=e.value.replace(/\s+/," "),e.value=e.value.replace(/-+/,"-").replace(/\++/,"+"),e.value=e.value.replace(/(^[\s\-]+)/g,"").replace(/[\s\-]+$/g,"")},d=e=>{let t=/[^А-Я\s-]/gi,l=/[^\d\+]/g,a=e.querySelector("[name='user_name']"),r=e.querySelector("[name='user_phone']"),n=e.querySelector("[name='user_email']"),o=e.querySelector("[name='user_message']");/^([A-Z\d_\-\.!~*'])+\@([A-Z\d])+\.([A-Z]{2,3})$/gi.test(n.value)&&""!==n.value?(u(n),s.remove(),s.textContent="",s.style.color="",n.classList.add("success")):(u(n),n.classList.remove("success"),s.textContent="Почта введена не правильно",s.style.cssText="\n            color: #eeff00;\n            font-size: 19px;\n            padding: 10px 0;\n            ",e.append(s)),t.test(a.value)||""===a.value?(a.classList.remove("success"),a.value=a.value.replace(t,"")):(u(a),a.classList.add("success"),a.value=a.value.replace(t,"")),o&&(t.test(o.value)||""===o.value?(o.classList.remove("success"),o.value=o.value.replace(t,"")):(u(o),o.classList.add("success"),o.value=o.value.replace(t,""))),l.test(r.value)||""===r.value?(r.classList.remove("success"),r.value=r.value.replace(l,"")):(u(r),r.classList.add("success"),r.value=r.value.replace(l,""))},i=t=>{let l=t.querySelectorAll("input"),a=new FormData(t),n={};s.style.cssText="\n        width: 20px;\n        height: 20px;\n        margin: auto;\n        background-color: #337ab7;\n        border-radius: 20%;\n        color: #ffffff;\n        ",e({duration:1e3,timing:e=>e,draw(e){s.style.opacity=e}}),t.append(s),a.forEach(((e,t)=>{n[t]=e})),r.forEach((e=>{let t=document.getElementById(e.id);"block"===e.type&&"0"!==t.textContent?n[e.id]=t.textContent:"input"===e.type&&0!==t.textContent&&(n[e.id]=t.value)})),(e=>{let t=!0;return e.forEach((e=>{e.classList.contains("success")||(t=!1,console.log(e))})),t})(l)?(async e=>{const t=await fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}});return await t.json()})(n).then((e=>{s.style.cssText="",s.style.color="#ffffff",s.textContent="Спасибо! Наш менеджер с вами свяжется.",l.forEach((e=>{e.value=""}))})).catch((e=>{s.textContent="Ошибка"})):console.log("error")};try{if(!n||!o||!c)throw new Error("Верните форму на место!");n.addEventListener("submit",(e=>{e.preventDefault(),i(n)})),o.addEventListener("submit",(e=>{e.preventDefault(),i(o)})),c.addEventListener("submit",(e=>{e.preventDefault(),i(c)})),n.addEventListener("input",(()=>{d(n)})),o.addEventListener("input",(()=>{d(o)})),c.addEventListener("input",(()=>{d(c)}))}catch(e){console.log(e.message)}})({formId:"form1",formIdModal:"form3",formIdMess:"form2",someElem:[{type:"block",id:"total"}]})})();